- content_for :title, 'Edit Site Settings'

.d-flex.justify-content-between.flex-wrap.flex-md-nowrap.align-items-center.pt-3.pb-2.mb-3.border-bottom
  %h1.h2 Edit Site Settings
  .btn-toolbar.mb-2.mb-md-0
    = link_to manage_site_settings_path, class: 'btn btn-outline-secondary' do
      %i.bi.bi-arrow-left.me-2
      Cancel

= form_with url: manage_site_settings_path, method: :patch, local: true, class: 'needs-validation', novalidate: true do |form|
  .row
    .col-lg-8
      / General Settings Card
      .card.border-0.shadow-sm.mb-4
        .card-header.bg-white.border-0.pb-0
          %h6.card-title.text-dark.mb-0
            %i.bi.bi-info-circle.me-2
            General Settings
        .card-body.pt-3
          .row
            .col-md-6
              = form.label "site_settings[site_name]", "Site Name", class: "form-label small text-muted mb-2"
              = form.text_field "site_settings[site_name]", value: @settings['site_name'], class: "form-control", required: true
              .form-text.text-muted.small
                Appears in browser titles and navigation
            .col-md-6
              = form.label "site_settings[site_description]", "Site Description", class: "form-label small text-muted mb-2"
              = form.text_field "site_settings[site_description]", value: @settings['site_description'], class: "form-control"
              .form-text.text-muted.small
                Used for SEO and social media sharing
          .mt-3
            = form.label "site_settings[site_tagline]", "Site Tagline", class: "form-label small text-muted mb-2"
            = form.text_field "site_settings[site_tagline]", value: @settings['site_tagline'], class: "form-control"
            .form-text.text-muted.small
              A short phrase that describes your site

      / Content Settings Card
      .card.border-0.shadow-sm.mb-4
        .card-header.bg-white.border-0.pb-0
          %h6.card-title.text-dark.mb-0
            %i.bi.bi-gear.me-2
            Content Settings
        .card-body.pt-3
          .row
            .col-md-6
              = form.label "site_settings[posts_per_page]", "Posts Per Page", class: "form-label small text-muted mb-2"
              = form.number_field "site_settings[posts_per_page]", value: @settings['posts_per_page'], class: "form-control", min: 1, max: 50
              .form-text.text-muted.small
                Number of posts to show on each page
            .col-md-6
              = form.label "site_settings[allow_comments]", "Allow Comments", class: "form-label small text-muted mb-2"
              = form.select "site_settings[allow_comments]", options_for_select([['Yes', 'true'], ['No', 'false']], @settings['allow_comments']), {}, { class: "form-select" }
              .form-text.text-muted.small
                Enable commenting system (if implemented)

      / Hero Section Card
      .card.border-0.shadow-sm.mb-4
        .card-header.bg-white.border-0.pb-0
          %h6.card-title.text-dark.mb-0
            %i.bi.bi-image.me-2
            Hero Section
        .card-body.pt-3
          .mb-3
            = form.label "site_settings[hero_enabled]", "Enable Hero Section", class: "form-label small text-muted mb-2"
            = form.select "site_settings[hero_enabled]", options_for_select([['Yes', 'true'], ['No', 'false']], @settings['hero_enabled']), {}, { class: "form-select" }
            .form-text.text-muted.small
              Show a hero section on the main page
          
          .row
            .col-md-6
              = form.label "site_settings[hero_title]", "Hero Title", class: "form-label small text-muted mb-2"
              = form.text_field "site_settings[hero_title]", value: @settings['hero_title'], class: "form-control", placeholder: "Welcome to Our Blog"
              .form-text.text-muted.small
                Main headline for the hero section
            .col-md-6
              = form.label "site_settings[hero_subtitle]", "Hero Subtitle", class: "form-label small text-muted mb-2"
              = form.text_field "site_settings[hero_subtitle]", value: @settings['hero_subtitle'], class: "form-control", placeholder: "Discover amazing stories"
              .form-text.text-muted.small
                Secondary text under the title
          
          .mt-3
            = form.label "hero_image", "Hero Image", class: "form-label small text-muted mb-2"
            - if SiteSetting.has_hero_image?
              .mb-3
                .d-flex.align-items-start.gap-3
                  = image_tag SiteSetting.hero_image.variant(resize_to_fill: [200, 120]), class: "img-thumbnail", style: "max-width: 200px;"
                  - if SiteSetting.hero_image_attribution.present?
                    .flex-grow-1
                      %p.mb-0.small.text-muted
                        %strong Attribution:
                        = SiteSetting.hero_image_attribution
            = form.file_field "hero_image", class: "form-control", accept: "image/*"
            .form-text.text-muted.small
              Upload a background image for the hero section (JPEG, PNG, or WebP)
              - if SiteSetting.has_hero_image?
                %br
                Leave blank to keep the current image.
          
          .mt-3
            = form.label "hero_image_attribution", "Hero Image Attribution", class: "form-label small text-muted mb-2"
            = form.text_field "hero_image_attribution", value: SiteSetting.hero_image_attribution, class: "form-control", placeholder: "Photo by John Doe on Unsplash"
            .form-text.text-muted.small
              Optional attribution text for the hero image

      / Contact & Social Card
      .card.border-0.shadow-sm.mb-4
        .card-header.bg-white.border-0.pb-0
          %h6.card-title.text-dark.mb-0
            %i.bi.bi-envelope.me-2
            Contact & Social Media
        .card-body.pt-3
          .mb-3
            = form.label "site_settings[contact_email]", "Contact Email", class: "form-label small text-muted mb-2"
            = form.email_field "site_settings[contact_email]", value: @settings['contact_email'], class: "form-control", placeholder: "your@email.com"
            .form-text.text-muted.small
              Contact email for inquiries
          
          .row
            .col-md-4
              = form.label "site_settings[social_twitter]", "Twitter Username", class: "form-label small text-muted mb-2"
              .input-group
                %span.input-group-text @
                = form.text_field "site_settings[social_twitter]", value: @settings['social_twitter'], class: "form-control", placeholder: "username"
            .col-md-4
              = form.label "site_settings[social_github]", "GitHub Username", class: "form-label small text-muted mb-2"
              = form.text_field "site_settings[social_github]", value: @settings['social_github'], class: "form-control", placeholder: "username"
            .col-md-4
              = form.label "site_settings[social_linkedin]", "LinkedIn Username", class: "form-label small text-muted mb-2"
              = form.text_field "site_settings[social_linkedin]", value: @settings['social_linkedin'], class: "form-control", placeholder: "username"

      / Footer Settings Card
      .card.border-0.shadow-sm.mb-4
        .card-header.bg-white.border-0.pb-0
          %h6.card-title.text-dark.mb-0
            %i.bi.bi-file-text.me-2
            Footer & Analytics
        .card-body.pt-3
          .mb-3
            = form.label "site_settings[footer_text]", "Footer Text", class: "form-label small text-muted mb-2"
            = form.text_area "site_settings[footer_text]", value: @settings['footer_text'], class: "form-control", rows: 2, placeholder: "Copyright text or other footer information"
            .form-text.text-muted.small
              Text displayed in the site footer
          
          .mb-3
            = form.label "site_settings[analytics_code]", "Analytics Code", class: "form-label small text-muted mb-2"
            = form.text_area "site_settings[analytics_code]", value: @settings['analytics_code'], class: "form-control font-monospace", rows: 3, placeholder: "Google Analytics or other tracking code"
            .form-text.text-muted.small
              JavaScript tracking code (Google Analytics, etc.)

    .col-lg-4
      / Actions Card
      .card.border-0.shadow-sm.mb-4
        .card-body
          %h6.mb-3 Save Changes
          %p.small.text-muted
            Changes will take effect immediately after saving.
          
          = form.submit "Save Settings", class: "btn btn-primary w-100 mb-2"
          = link_to "Cancel", manage_site_settings_path, class: "btn btn-outline-secondary w-100"

      / Help Card
      .card.border-0.shadow-sm
        .card-header.bg-white.border-0.pb-0
          %h6.card-title.text-dark.mb-0
            %i.bi.bi-question-circle.me-2
            Help
        .card-body.pt-3
          %p.small.text-muted
            %strong Site Name:
            This appears in browser tabs and throughout your site.
          
          %p.small.text-muted
            %strong Social Media:
            Enter just the username (without @ or full URL).
          
          %p.small.text-muted
            %strong Analytics:
            Paste your Google Analytics or other tracking code here.